<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>sell</title>
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" type="text/css" href="/static/css/reset.css">
    <!--<script src="/static/js/jquery.min.js"></script>-->
    <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <script src="/static/js/test.js"></script>
    <!-- 引入样式 -->
    <!--<link rel="stylesheet" href="/static/css/index.css">-->
  </head>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
   <script type="text/javascript">
    function fsubmit(){ 
        let myForm = document.getElementById('form1');
        let data = new FormData(myForm[0]);
        // var data = new FormData($('#form1')[0]);  
        $.ajax({  
            url: 'http://localhost/camU/index/index/uploadPins.html',  
            type: 'POST',  
            data: data,  
            dataType: 'JSON',  
            cache: false,  
            processData: false,  
            contentType: false  
        }).done(function(ret){  
            if(ret['isSuccess']){  
                var result = '';  
                result += 'name=' + ret['name'] + '<br>';  
                result += 'gender=' + ret['gender'] + '<br>';  
                result += '<img src="' + ret['photo']  + '" width="100">';  
                $('#result').html(result);  
            }else{  
                alert('提交失敗');  
            }  
        });  
        return false;  
    }
    // waterfall(); 
    //     //resize 侦测浏览器窗口变化，有变化重新计算和布局
         $(window).on('resize',function () {
             waterfall(); 
        })      
        function waterfall () {     
            var itemW = $('.item').outerWidth(true),
        		windowW = $(window).width(),
        		colNum = Math.floor(windowW/itemW),//有多少列
        		colNowHeight = [];//存放每一列当前总的高度
        	
            for(var i = 0;i < colNum;i++){
        		colNowHeight.push(0);//初始化数组，每列当前总的高度0
        	}
        	
            //遍历每个item选择他们的归属
        	$('.item').each(function() {
                $this = $(this);
        		//遍历找出高度最短的列及其对应的高度
                var minColNowHeight = colNowHeight[0],
                    minCol = 0;//最小总高度的列
        		for(var i = 0;i < colNowHeight.length;i++){
                    if (colNowHeight[i] < minColNowHeight) {
                        minColNowHeight = colNowHeight[i];
                        minCol = i;
                    }
                }
                $this.css({
                    left: itemW * minCol,
                    top: minColNowHeight
                });
                colNowHeight[minCol] += $this.outerHeight(true);
        	});
        } 
  </script> 
  <style>
	.wrap{
		position: relative;
	}
	.item{
		position: absolute;
		width: 236px;
		margin-left: 20px;
		margin-top: 10px;
		transition: all 1s;
	}
	.h1{
		height: 300px;
		background-color: #79C40E;
	}
	.h2{
		height: 500px;
		background-color: #FBA20E;
	}
	.h3{
		height: 700px;
		background-color: #0ACBB6;
	}
	.h4{
		height: 400px;
		background-color: #820F6E;
	}
	.h5{
		height: 200px;
		background-color: #E45555;
	}
</style>
</html>
